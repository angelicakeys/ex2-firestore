{"version":3,"sources":["composants/SommairePanier.jsx","composants/Entete.jsx","composants/BtnAjoutPanier.jsx","composants/Produit.jsx","data/firebase.js","composants/ListeProduits.jsx","composants/Accueil.jsx","composants/Apropos.jsx","composants/Contact.jsx","composants/PiedDePage.jsx","composants/Appli.jsx","index.jsx"],"names":["SommairePanier","info","articles","nbArticles","totalItems","st","tps","tvq","total","length","reduce","acc","article","qte","prix","toFixed","retournerInfoPanier","className","Entete","etatPanier","panier","Object","values","useState","afficherSommaire","setAfficherSommaire","to","activeClassName","Badge","onClick","badgeContent","accumulateur","eltCourant","color","BtnAjoutPanier","texte","classeCss","Produit","id","nom","image","setPanier","src","alt","fbAppli","apps","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","bd","firestore","ListeProduits","props","produits","setProduits","useEffect","tabProduits","collection","get","then","reponse","forEach","doc","push","data","map","produit","Accueil","Apropos","Contact","annee","Date","getFullYear","PiedDePage","Appli","window","localStorage","getItem","JSON","parse","setItem","stringify","path","component","exact","baseName","location","href","search","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.381fd0b0.chunk.js","sourcesContent":["import './SommairePanier.scss';\n\nexport default function SommairePanier({articles}) {\n  // On utiliser une fonction utilitaire pour faire le calcul de l'info requise dans le sommaire\n  const info = retournerInfoPanier(articles);\n\n  return(\n    <div className=\"SommairePanier\">\n      <span>Articles différents : {info.nbArticles}</span>\n      <span>Total # items : {info.totalItems}</span>\n      <span>Sous-total : {info.st}</span>\n      <span>TPS : {info.tps}</span>\n      <span>TVQ : {info.tvq}</span>\n      <span>Total : {info.total}</span>\n    </div>\n  );\n}\n\nfunction retournerInfoPanier(articles) {\n  // le tableau des articles du panier ressemle à ça :\n  // [ {nom: 'sdfsd', prix: 15.99, qte: 2}, {nom: 'sdfsd', prix: 9.99, qte: 6}, {nom: 'sdfsd', prix: 23.67, qte: 15}]\n  let info = {nbArticles: 0, totalItems: 0, st: 0, tps: 0, tvq: 0, total: 0};\n  info.nbArticles = articles.length;\n  info.totalItems = articles.reduce((acc, article) => acc + article.qte , 0);\n  const st = articles.reduce((acc, article) => acc + (article.prix*article.qte), 0);\n  info.st = st.toFixed(2); // Attention : toFixed() transforme le nombre en chaîne de caractères\n  const tps = st * 0.05;\n  info.tps = tps.toFixed(2)\n  const tvq = st * 0.09975;\n  info.tvq = tvq.toFixed(2);\n  info.total = (st + tps + tvq).toFixed(2);\n  return info;\n}","import './Entete.scss';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport Badge from '@material-ui/core/Badge';\nimport SommairePanier from './SommairePanier';\nimport { useState } from 'react';\nimport { Link, NavLink } from 'react-router-dom';\n\nexport default function Entete({etatPanier}) {\n  // Nous avons besoin uniquement de la variable d'état, et pas du mutateur (setPanier)\n  const [panier] = etatPanier;\n  \n  // On extrait le tableau des valeurs de l'objet 'panier' \n  // (cette variable est utilisée pour afficher le nombre d'articles dans le badge sur l'icône du panier)\n  const articles = Object.values(panier);\n\n  // État d'affichage du sommaire (un 'toggle' : donc true ou false fonctionne bien ici)\n  const [afficherSommaire, setAfficherSommaire] = useState(false);\n\n  return (\n    <header className=\"Entete\">\n      <div className=\"logo\">\n        <Link to=\"/\">\n          Magasin\n        </Link>\n      </div>\n      <ul className=\"navPrincipale\">\n        <li><NavLink to=\"/nos-produits\" activeClassName=\"navActive\">Produits</NavLink></li>\n        <li><NavLink to=\"/a-propos-de-nous\" activeClassName=\"navActive\">À propos de nous</NavLink></li>\n        <li><NavLink to=\"/contactez-nous\" activeClassName=\"navActive\">Contactez-nous</NavLink></li>\n      </ul>\n      <ul className=\"navUtilisateur\">\n        <li>\n          <Badge onClick={() => setAfficherSommaire(!afficherSommaire)} badgeContent={articles.reduce((accumulateur, eltCourant) => accumulateur + eltCourant.qte, 0)} color=\"secondary\">\n            <ShoppingCartIcon />\n          </Badge>\n          { afficherSommaire && \n            <SommairePanier articles={articles} />\n          }\n        </li>\n        <li>Mon compte</li>\n      </ul>\n    </header>\n  )\n}","import { Badge } from '@material-ui/core';\n\nimport './BtnAjoutPanier.scss';\n\nexport default function BtnAjoutPanier({onClick, qte, texte, classeCss}) {\n  return (\n    <Badge badgeContent={qte} color=\"primary\">\n      <button onClick={onClick} className={`BtnAjoutPanier ${classeCss}`}>\n        {texte}\n      </button>\n    </Badge>\n  );\n} \n\n","import BtnAjoutPanier from './BtnAjoutPanier';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport './Produit.scss';\n\nexport default function Produit({etatPanier, id, nom, prix, image}) {\n  const [panier, setPanier] = etatPanier;\n\n  /**\n   * Ajouter un article au panier (en faisant la mutation de l'état)\n   */\n  function ajouterPanier() {\n    if(panier[id]) {\n      // panier[id].qte++; // Ancien code : pas une bonne pratique : il ne faut pas modifier la variable d'état\n      setPanier({...panier, [id]:{...panier[id], qte: panier[id].qte + 1}});\n    }\n    else {\n      // panier[id] = {nom: nom, prix: prix, qte: 1} // Idem comme ci-dessus\n      setPanier({...panier, [id]:{nom, prix, qte: 1}});\n    }\n    // On a plus besoin de la ligne suivante puisque setPanier est maintenant utilisée directement ci-dessus\n    // setPanier(JSON.parse(JSON.stringify(panier))); // {...panier}\n  } \n\n  // État du bouton (remarquez l'utilisation de la décomposition de tableau)\n  let [qte, texte, classeCss]  = \n        panier[id] \n          ? [panier[id].qte, <AddCircleOutlineIcon />, \"rouge\"] \n          : [0, \"Ajouter au panier\", \"\"];\n  \n  return(\n    <li className=\"Produit\">\n      <img src={'images-produits/' + image + '.webp'} alt=\"\"/>\n      <div className=\"info\">\n        <p className=\"nom\">{nom}</p>\n        <p className=\"prix\">{prix}</p>\n      </div>\n      <BtnAjoutPanier onClick={ajouterPanier} qte={qte} texte={texte} classeCss={classeCss} />\n    </li>\n  );\n}\n","import fbAppli from 'firebase/app';\nimport 'firebase/firestore';\n\n/******* Ex#3 - Étape B ********************************/ \n// Ajouter votre objet de configuration Firebase\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBgMiKvAe10xOwJ2apvQvfsVJLz9s6r5hQ\",\n    authDomain: \"react-amm.firebaseapp.com\",\n    projectId: \"react-amm\",\n    storageBucket: \"react-amm.appspot.com\",\n    messagingSenderId: \"845681079176\",\n    appId: \"1:845681079176:web:7a531bab49f373dfad803d\"\n};\n\n// Initialiser Firebase\nif(!fbAppli.apps.length) {\n  fbAppli.initializeApp(firebaseConfig);\n}\n\n// Initialiser Firestore\nconst bd = fbAppli.firestore();\n\n/******* Ex#3 - Étape C ********************************/ \n// Exporter (par défaut) ci-dessous la référence à \"bd\" obtenue ci-dessus (pour pouvoir l'utiliser dans le composant ListeProduits)\nexport default bd;","import './ListeProduits.scss';\nimport Produit from \"./Produit\";\nimport { useEffect, useState } from 'react';\n/******* Ex#3 - Étape D ********************************/ \n// Importer l'objet bd du fichier firebase.js\nimport bd from '../data/firebase';\n\nexport default function ListeProduits(props) {\n  /******* Ex#3 - Étape E ********************************/ \n  // Créer un \"état\" React pour les produits (utiliser useState) et décomposer-le pour obtenir des références aux deux éléments de l'état (la variable et la fonction mutateur)\n  const [produits,setProduits]= useState([]);\n    \n  useEffect(\n    () => {\n      // On initialise un tableau pour contenir les produits extraits de Firestore\n      const tabProduits = [];\n      \n      /******* Ex#3 - Étape F et G ********************************/ \n      // Étape F : Faire une requête à la collection de produits sur Firestore et remplir les tableau tabProduits avec les données de produits retournées par Firestore (ne pas oublier d'ajouter l'identifiant)\n      bd.collection('ex2-produits').get().then(\n      // Étape G : Une fois le tableau tabProduits rempli, modifier l'état des produits (initialisé ci-dessus avec useState) en utilisant le mutateur et le tableau tabProduits\n        reponse =>  {\n          \n          reponse.forEach(doc => tabProduits.push({id: doc.id,...doc.data()}));\n          setProduits(tabProduits);\n        }\n      )\n    }\n  , []); // Ne modifiez surtout pas le tableau des dépendances à gauche : vous risquez un appel récurent sans fin à Firebase !!\n\n  return (\n    <div className=\"ListeProduits\">\n      <h2>Produits disponibles</h2>\n      <ul>        \n        {/*\n          ******* Ex#3 - Étape H ******************************** \n          Utiliser la variable d'état qui contient les produits pour générer les composants 'Produit' ci-dessous (avec la méthode map()).\n          Remarque : Vous pouvez si vous voulez reproduire la solution déjà faite en classe (c'est un trivial copier-coller).\n          Attention : les composants Produit s'attendent à recevoir l'état du panier dans leurs 'props', donc vous devez\n          avoir l'attribut \"etatPanier={props.etatPanier}\" quand vous les générer ici : encore une fois, regardez \n          le code de l'exercice de classe. Vous pouvez aussi regarder le code du composant Produit pour vérifier ce qu'il \n          a besoin de recevoir en 'props'.\n        */}\n\n      {\n        produits.map( \n          produit =>  <Produit key={produit.id} etatPanier={props.etatPanier}  {...produit}  />\n        )\n      }\n        \n      </ul>\n    </div>\n  );\n}","export default function Accueil() {\n  return (\n    <div className=\"Accueil\">\n      <h2>Magasin</h2>\n      <p>Page d'accueil en construction</p>\n    </div>\n  );\n}","export default function Apropos() {\n  return (\n    <div className=\"Apropos\">\n      <h2>À propos de nous</h2>\n      <p>Patati et patata</p>\n    </div>\n  );\n}","export default function Contact() {\n  return (\n    <div className=\"Contact\">\n      <h2>Contactez-nous</h2>\n      <p>Formulaire de contact à venir</p>\n    </div>\n  );\n}","import './PiedDePage.scss';\n\n// Nous avons besoin de cette valeur une seule fois dans le cycle de vie de l'appli.\n// Donc, on la calcule en dehors du code du composant.\nconst annee = new Date().getFullYear();\n\nexport default function PiedDePage(props) {  \n  return (\n    <footer className=\"PiedDePage\">\n      &copy;{annee} - TIM - Tous droits réservés.\n    </footer>\n  );\n}","import './Appli.scss';\nimport Entete from './Entete.jsx';\nimport ListeProduits from './ListeProduits';\nimport Accueil from './Accueil';\nimport Apropos from './Apropos';\nimport Contact from './Contact';\nimport PiedDePage from './PiedDePage';\nimport { useState, useEffect } from 'react';\nimport { Switch,Route } from 'react-router-dom';\n\nexport default function Appli() { \n  // État du panier\n  const etatPanier = useState(\n    () => window.localStorage.getItem('panier-4pa-ex2') ? JSON.parse(window.localStorage.getItem('panier-4pa-ex2')) : {}\n  );\n  // Variable d'état qui contient le panier\n  const [panier] = etatPanier;\n  // Sauvegarde du panier dans localStorage (à chaque fois que l'état du panier change)\n  useEffect(\n    () => window.localStorage.setItem('panier-4pa-ex2', JSON.stringify(panier))\n    , [panier]\n  );\n  return (\n    <div className=\"Appli\">\n      <Entete etatPanier={etatPanier} />\n      <section className=\"contenuPrincipal\">\n        {/* Le routeur va s'occuper d'inclure le composant correspondant au chemin (route) requis */}\n        <Switch>\n          {/* Notez qu'on peut spécifier une route avec un élément vide, en utilisant l'attribut 'component'... */}\n          <Route path=\"/\" component={Accueil} exact/>\n          {/* ... ou un élément conteneur en spécifiant le composant comme enfant de 'Route'  */}\n          <Route path=\"/nos-produits\">\n            <ListeProduits etatPanier={etatPanier} exact />\n          </Route>\n          <Route path=\"/a-propos-de-nous\" exact>\n            <Apropos />\n          </Route>\n          <Route path=\"/contactez-nous\" component={Contact} exact />\n        </Switch>\n      </section>\n      <PiedDePage />\n    </div>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.scss';\nimport Appli from './composants/Appli';\n\n/******* Ex#3 - Étape I ********************************/ \n// Ajuster la valeur de la constante suivante pour qu'elle reflète le nom exact de *votre* dépôt GitHub de solution\nconst nomDepotGitHub = \"ex2-firestore\";\n\n\n// Ne rien modifier aux lignes suivantes \nconst baseName = (window.location.href.search(/github\\.io/) !== -1) ? `/${nomDepotGitHub}` : \"\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename={baseName}>\n      <Appli />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('racine')\n);"],"sourceRoot":""}